\chapter{需求分析}
\label{requirement}

本章节将会对于系统本身的技术需求、编著和交互系统的目标用户的使用需求进行分析，以此作为系统设计和实现的指导。

\section{技术需求}
对于增强现实应用来说，为了向用户提供尽可能舒适的使用体验，需要满足一定的技术需求。\cite{artech}

\begin{itemize}
    \item \textbf{视场角(Field of View，FOV)}
    
       人的视场角是由人的视野决定的。人的双眼可以检测到动作的最远边界，大约是水平200度，竖直140度的范围，其中水平区域大约有140度是双目可见的范围，其余仅单目可见。用户使用手机进行交互，可以基本满足在双目可见的范围内成像。
    
    \item \textbf{像素度(Pixel Per Degree，PPD)}
    
     在理想的使用条件下，如果需要用户不能在观察电子屏幕成像物体的时候区分其中的像素，就需要显示器的分辨率可以满足在人眼成像的时候一定范围内的像素数目足够高。一般60PPD就可以达到要求。它与用户与显示屏的距离以及显示屏的分辨率有关。
    
    \item \textbf{延迟(latency)}
    
      人眼是具有一定的延迟的，因此对于应用的帧率具有一定的要求，帧率太低会影响使用体验，一般来说，帧率应当达到60帧。
    
    \item \textbf{视觉调节(accommodation)}
    
    人眼在观察深度不同的物体的时候人眼肌肉会进行自我调节，因此不同深度的物体在现实过程中不应过多，一般5-10个不同聚焦深度的物体就足够了，这样可以缓解人眼疲劳。
\end{itemize}

\indent    	由上述技术要求，在硬件具备一定的条件的基础上，用户与设备的距离应当适中。此外，软件层面，前端应用的渲染帧率应当达到60帧，并且同时渲染的虚拟物体不宜过多。

\section{用户需求}

本系统前端的编著与交互系统是面向教育者和学生开发的。因此在需求设计上，应当考虑他们的需求。

\subsection{交互需求}
对于教师来说，它们通常不具有编程能力，因此所有功能都应该封装起来，只留下简单明晰的用户接口。教师往往没有太多时间学习新系统，因此交互方式应当符合直觉或常识，例如拖动移动物体、点击编辑物体等。此外，对与对系统不熟悉的人，很可能对于系统的使用流程不熟悉，因此一方面在降低用户的学习成本的同时，应当适当的进行操作指示和辅助。例如在交互界面显示提示字板，或在用户初次使用的时候，对用户进行引导。另一方面，用户在未知的情况下很可能做出很多设想之外的操作，或违规操作，这些操作应当尽可能从代码层面避免。

\subsection{功能需求}
目前的教学辅助应用可以为学生提供个性化辅导，以及应试辅助两个方面的帮助。在个性化的方面，增强现实应用本身就可以为学生提供更丰富的学习体验，扩展视野。这要求应用在增强现实方面尽可能做到虚实融合效果稳定可靠、视觉效果比较好，并且为用户提供丰富而自由的交互。在应试辅导方面，则需要教学辅助应用利用可重复性高的特点，为学生的实验考试提供帮助。例如，在引导学生进行实验的时候，应当关注与操作的准确性，包括各种仪器的使用方式、实验流程等。此外，对于错误操作应当进行警告与纠正。还可以模拟一些操作的试题，例如在规定产物以及生成量的基础上，由学生自主控制反应药品和反应量等等。

\subsection{硬件平台}
根据实际学校的使用情况，对于硬件平台也有一定的要求。首先，设备本身成本不宜过高，对于一个40人的班级来说，平均需要两人一套设备，这本身就是很大的开销。另外，设备所占场地也应该尽可能小，因为学校的教室、实验室的空间都比较有限。手机交互就是一种比较合理的方式。但是，为了保证手机交互的便捷，应当避免手机难以实现的交互操作，例如鼠标悬停等。


\section{功能总结}
由于本系统目前仍然在原型阶段，而且使用了深度摄像头和物体追踪功能，很难以目前的条件满足上述需求。因此在结合需求与研究显示的基础上，总结出系统应当实现的功能。

从编著系统的功能来说，本项目基于化学引擎进行开发，得出需要实现的功能包括，用户可以编辑实验环境，如场景灯光颜色和亮度、相机高度和角度等。用户可以添加实验仪器或药品，移动他们的位置、编辑药品的种类和量等。用户可以修改提示信息的颜色、位置、大小。用户可以自主编辑实验流程，包括实验的标题，每一个流程的名称（如预热），每个流程之下个步骤的名称（如点燃酒精灯）以及对应的事件名称等。事件用于在进行实验的过程中将用户自定义的实验步骤与统一的实验操作进行对应。而从交互系统来说，则应当支持手机端进行交互，并且为用户提供一定的自由度。